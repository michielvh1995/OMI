\documentclass[a4paper,12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{cite}

\title{Research Plan Force-directed Graph Drawing}
\author{
  Michiel van Heusden, 4173309 \and
  Maurits van der Veen, 4167287 \and
  Kevin Oosterlaak, 4012372 \and
  Jesse Ceelen, 4061837
  }
\date{\today}

\begin{document}
  \maketitle
  \tableofcontents
  \section{intro}
  Data requires often visualization before people understand what it means.
  This visualization is done with graphs and charts.
  This research focusses on the drawing methods of graphs.
  These graphs consist of objects and the relations between eachother.
  In graph theory the objects are called vertices and their relations edges.\cite{bondy1976graph}
  Generating readable graphs becomes difficult according to the amount of vertices and edges.
  To generate these correctly many algorithms were developed.
  One family of functions to do this is called \emph{Force Directed Graph Drawing}.
  The idea behind force directed graph drawing is to use physics based algorithms to calculate the positions of each correctly.
  In this research a few algorithms wil be examined and how correctly they can generate a graph.
  Not only will we compare different algorithms, we will also inspect how some algorithm-specific constants influence the results.

  \subsection{The Algorithms}\label{par:algorithms}
    The method used for each of the tests is the same,  except for the way the forces are calculated.
    Said method is for each vertex to iterate over the other vertices and calculate the repulsive force between them.
    Then the same is done, but instead of iterating over vertices, it iterates over edges connected to the current vertex.
    Lastly the forces are added to eachother and applied to each vertex.

    In order for the graphs not to "run away" it is possible to lock one vertex in place.
    The forces will not be applied to this locked vertex.

    \subsubsection{Hooke-Coulomb}
    The Hooke-Coulomb algorithm is not named after its inventors, but after the laws it follows.
    The attractive forces are calculated using Hooke's Spring Law.
    The repulsive ones are based on particle physics.
    To be more precise, they are calculated using Coulomb's law of charged particles.

    Hooke's Law can be used to calculate the distance a spring extends when a certain force is applied to it.
    However, this same law can be used to calculate the required force for a spring to be extended a certain distance.
    The law itself is rather simple:
    \begin{equation}
      F = c \delta X
    \end{equation}
    Here $c$ is a constant that defines the stiffness of the spring, it is also known as te \emph{spring constant}.
    The change in length is $\delta X$, whilst $F$ the required force is.

    Coulomb's law was first published by the French physicist Charles Augustin de Coulomb in 1785.\cite{coulomb1785premier}
    Though it was first proposed for charged metal balls, it holds for charged particles.
    In his book Coulomb states that two equally electrified metal balls "\ldots the repulsive force that the two balls \ldots exert on each other, follows the inverse proportion of the square of the distance".
    This means that the repulsive force grows quadratic the closer the balls are.
    Coulomb's law can be written down as an equation as well:
    \begin{equation}
      F = k_e \frac{q_1 q_2}{r^2}
    \end{equation}
     In this equation $q_1$ and $q_2$ are the charges of the particles.
    Where $r$ is the distance between them. Lastly the constant $k_e$ is Coulomb's Constant.\footnote{$k_e = 8.987551787 x 10^9 N m^2 C^{-2}$}

    Changing Hooke's Law to make it useful for the calculation of forces is rather straightforeward:
    Each edge corresponds to a spring, where the vertices are objects connected by springs.
    Thus we can state an ideal length $l_0$ for each edge, for easy calculations we have decided on $l_0 = 10$.
    Using the ideal length -- which can be seen as the starting length of the spring -- it is possible to calculate $\delta X$:
    \begin{equation}
      \delta X =  l_d - l_0
    \end{equation}
    In this formula $l_d$ is the distance between the two connected vertices.
    The resulting formula for the attractive forces between vertices $i$ and $j$ will thus be:
    \begin{equation}
      F_a (i,j) = c (l_d - l_0)
    \end{equation}
    In this formula the constant $c$ is the variable that will be changed during testing.
    Its value will vary between $ 0 $ and $1$, with intervals of $0.1$.
    Not only could $c$ be seen as the stiffness of the spring, it could also be seen as the weight of the attractive force.
    Thus it can be used to control how much influence the spring has on the vertex.

    Rewriting Coulomb's law to be useful in our research requires a bit more effort.
    However, it results in the very simplified equation \ref{eq:coulomb_rewritten}.
    This equation is the result of some assumptions.
    First off, the charge of both the particles is 1.
    Furthermore, as Coulomb's law is designed for particle physics in which distances are miniscule, it is possible to remove Coulomb's Constant.
    \begin{equation}
      F = \frac{1}{distance^2} \hat{r}
    \end{equation}
    In this equation $\vec{r}$ is a directional unit vector between two vertices.
    $\vec{r}$ can be calculated by using $\hat{r} = \vec{r_{i,j}} / |\vec{r_{i,j}}|$.
    Here $\vec{r_{i,j}}$ is the line between vertices $i$ and $j$, with length $|\vec{r_{i,j}}|$.

    Here we introduce a weight $w_a $ to adjust the influence the repulsive forces have on the vertices.
    The weight variable will be changed during each of the tests.
    With this knowledge the final equation for the repulsive force of the Hooke-Coulomb algorithm will be:
    \begin{equation}
      F_r(i,j) = w_a \frac{1}{|\vec{r_{i,j}}|^3} \vec{r_{i,j}}
    \end{equation}

    \subsubsection{Fruchterman Reingold}
    The Fruchterman Reingold algorithm on the otherhand is named after its inventors.\cite{fruchterman1991graph}
    For the method Fruchterman and Reingold proposed there are only two principles for graph drawing.
    Namely that connected verticed should be drawn near eachother and vertices should not be drawn \emph{too} close to eachother.
    This algorithm can be seen as based off of the idea of ideally distributed vertices.
    It does not focus so much on each individual node as well as how far each node should be apart from eachother.
    Like the Hooke Coulomb algorithm it is based off of particle physics:
    Particles that are close to eachother are repulsive, whilst at a distance they are attracted to eachother.
    This algorithm uses a few input variables of which three will be changed:
    \begin{itemize}
      \item The allowed surface area $W$
      \item The optimal distance between vertices $k$
      \item Attractive weight $\alpha$
      \item Repulsive weight $r$
    \end{itemize}
    During our testing all but the allowed surface area will be changed.
    Changing the surface area will only change the scale of the vertices.
    The influence the other values have to how the graph will look becomes clear from their usage.
    Both $\alpha$ and $r$ are weights to the forces.
    Thus directly changing how much influence the attractive and repulsive forces have on the vertices.
    $k$ on the other hand will not be directly changed, but by changing constant $c$ in its formula.
    \begin{equation}\label{eq:FR_k}
      k = c \sqrt{\frac{area}{number of vertices}}
    \end{equation}

    The constant $k$ plays an important part in calculation of both the attractive and repulsive forces.
    These can be calculated using formulas \ref{eq:FR_a} and \ref{eq:FR_r} respectively.
    In both of these equations $d$ is the distance between the two vertices on which the forces apply.
    \begin{equation}\label{eq:FR_a}
      f_a(d) = \frac{d^2}{k}
    \end{equation}
    \begin{equation}\label{eq:FR_r}
      f_r(d) = -\frac{k^2}{d}
    \end{equation}

    However when blindly applying these forces a good looking graph will never converge.
    Therefore a cooling function is required.
    This cooling function indicates how much the maximum change is per vertex.
    As the name suggests, this function returns a lower value every iteration.
    Thanks to this function eventually the change in the graph per iteration will diminish.

    \subsubsection{Eades}
    One person who has made many contributions to the research of force directed graph drawing is Peter Eades.
    This algorithm is very similar to the Hooke-Coulomb one.
    It uses springs and Coulomb's law to calculate the new locations of the forces.
    The difference between them is the type of springs used.
    Those used in the Hooke-Coulomb algorithm were Hookian -- or linear -- springs.
    The force they exert grows linearly, while the ones used in Eades' algorithm where \emph{logartimic} springs.
    Whenever Hookian springs get extended by a certain amount, no matter their length, results in the same amount of force.
    Logaritmic springs on the otherhand require more change the longer they are for the same force.
    The equation for the attractive force between vertices $i$ and $j$ in Eades' algorithm is:
    \begin{equation}\label{eq:Eades_a}
      f_a(i,j) = c_1 log(\frac{d}{c_2})
    \end{equation}

    Ofcourse there is only an attraction when the vertices are connected.
    This formula requires two constant parameters $c_1$ and $c_2$, these can be used to adjust the output values.
    The variable $d$ is the length of the spring.\cite{eades1984heuristic}

  \section{Problem Discription}
    The aforementioned algorithms are meant to make graphs more readable, giving them a clear organized structure.
    Since readability is a rather vague and abstract measurement criteria in itself, there have to be concrete measurable properties that represent readability.
    The following properties can be used to express readability: \cite{kobourov2012spring}
    \begin{itemize}
      \item Uniformity of vertex distribution
      \item Uniformity of edge lengths
      \item Amount of edge crossings
    \end{itemize}
    The uniformity of vertex distribution can also be seen as the density of the vertices.
    Every vertex has an area with a fixed radius where the density can be calculated by counting the amount of vertices in that area.
    For a readable graph it is important that the densities of all the vertices are similar.
    This characteristic of the uniformity of vertex distribution is measured with the standard deviation of the densities.
    The smaller the deviation, the more readable the graph is.

    With the uniformity of edge lengths, it is important that the lengths of all the edges are similar.
    A graph with a high variety of edge lengths is generally harder to read than a graph with edges of equal lengths.
    This characteristic can be measured with the standard deviation of the edge lengths.
    If there are more edges with different lengths, the standard deviation will be bigger, thus making the graph hard to read.
    Therefore, a high quality graph that is easy to read has a small deviation of edge lengths.

    For a good graph drawing, it is desirable to have as little amount of edge crossings as possible or none at all even.
    Having a lot of edges that cross each other makes the graph look more chaotic and harder to read.
    With that in mind, it obviously is preferred to not have them at all as it makes the graph more readable.

    Getting the right properties for these characteristics to make the graph readable is what all the aforementioned algorithms strive for.
    These algorithms calculate the attractive and repulsive forces differently and make use of them with different equations.
    This results in getting different graphs with each algorithm with different properties for the three characteristics.
    Finding out which algorithm comes closest to the desired readablity properties is what this research is meant to focus on.
    When testing these three algorithms, the uniformity of both the vertex distribution and the edge lengths and the amount of edge crossings will be measured and compared.
    By doing these tests multiple times, we can conclude which algorithm gives the highest quality graph from the results of these tests.
    Which brings us to our research question: Which force directed graph drawing algorithm yields the highest quality graphs?

  \section{The Experiment} % Beschrijving van het uitgevoerde experiment

  \section{Result Data} % Eindresultaten
  \subsection{Tabellen} % Uitgebeeld enzo
  \subsection{Grafieken}
  \subsection{Toelichting}
  \subsection{Statistische Hypothese}
  \subsection{De uitwerking hiervan}

  \section{Conclusion \& Discussion}
  \section{Reflection}

  \bibliography{verslag}{}
  \bibliographystyle{unsrt}
\end{document}
